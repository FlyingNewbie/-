# Java性能优化

## 一、理论分析

### 1.1、衡量指标

#### 1. 吞吐量和响应速度

QPS 代表每秒查询的数量，TPS 代表每秒事务的数量，HPS 代表每秒的 HTTP 请求数量等，这都是常用的与吞吐量相关的量化指标

* 响应速度是串行执行的优化，通过优化执行步骤解决问题；
* 吞吐量是并行执行的优化，通过合理利用计算资源达到目标。

#### 2. 响应时间衡量

##### （1）平均响应时间

平均响应时间(AVG)，该指标能够体现服务接口的平均处理能力。

##### （2）百分位数

意义是，超过 N% 的请求都在 X 时间内返回。



#### 3. 并发量

并发量是指系统同时能处理的请求数量，这个指标反映了系统的负载能力。

#### 4. 秒开率

#### 5. 正确性

### 1.2、性能优化理论方法

#### 1. 木桶理论

系统的整体性能，就取决于系统中最慢的组件。

#### 2. 基准测试、预热

基准测试(Benchmark)并不是简单的性能测试，是用来测试某个程序的最佳性能。

注意点:

1. 依据数字而不是猜想
2. 个体数据不足信
3. 不要过早优化和过度优化
4. 保持良好的编码习惯

###  1.3、性能优化的 7 类技术手段

#### 1. 复用优化

1.1、代码复用

1.2、数据复用

* 缓冲（Buffer）：常见于对数据的暂存，然后批量传输或者写入。多使用顺序方式，用来缓解不同设备之间频繁地、缓慢地随机写，缓冲主要针对的是写操作。
* 缓存（Cache）：常见于对已读取数据的复用，通过将它们缓存在相对高速的区域，缓存主要针对的是读操作。

#### 2. 计算优化

（1）并行执行

* 多机：用负载均衡的方式，将流量或者大的计算拆分成多个部分，同时进行处理
* 采用多进程
* 使用多线程

（2）变同步为异步

（3）惰性加载

#### 3. 结果集优化

#### 4. 资源冲突优化



#### 5. 算法优化



#### 6. 高效实现



#### 7. JVM 优化